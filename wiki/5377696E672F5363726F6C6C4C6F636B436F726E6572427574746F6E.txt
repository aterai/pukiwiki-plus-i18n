---
category: swing
folder: ScrollLockCornerButton
title: JScrollBarã®ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ­ãƒƒã‚¯ãƒœã‚¿ãƒ³ã‚’é…ç½®ã™ã‚‹
tags: [JScrollPane, JScrollBar, JToggleButton, JLayer, JTable]
author: aterai
pubdate: 2021-04-19T01:48:04+09:00
description: JScrollPaneã‹ã‚‰å–å¾—ã—ãŸå‚ç›´JScrollBarã¨ãã‚Œã‚‰ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹ãŸã‚ã®JToggleButtonã‚’åˆ¥ãƒ‘ãƒãƒ«ã«é…ç½®ã—ã¾ã™ã€‚
image: https://drive.google.com/uc?id=1ZkIGZwvzvvpcM42lAzeWexwmFaguhDY-
---
* æ¦‚è¦ [#summary]
`JScrollPane`ã‹ã‚‰å–å¾—ã—ãŸå‚ç›´`JScrollBar`ã¨ãã‚Œã‚‰ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹ãŸã‚ã®`JToggleButton`ã‚’åˆ¥ãƒ‘ãƒãƒ«ã«é…ç½®ã—ã¾ã™ã€‚

#download(https://drive.google.com/uc?id=1ZkIGZwvzvvpcM42lAzeWexwmFaguhDY-)

* ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ [#sourcecode]
#code(link){{
JTable table = new JTable(16, 4);
table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
JScrollPane scroll = new JScrollPane(table);
JToggleButton lock = new JToggleButton("ğŸ”“");
lock.setBorder(BorderFactory.createEmptyBorder());
lock.setContentAreaFilled(false);
lock.setFocusPainted(false);
lock.setFocusable(false);
DisableInputLayerUI<Component> layerUI = new DisableInputLayerUI<>();
lock.addItemListener(e -> {
  AbstractButton b = (AbstractButton) e.getItemSelectable();
  if (e.getStateChange() == ItemEvent.SELECTED) {
    b.setText("ğŸ”’");
    scrollLock(scroll, true);
    layerUI.setLocked(true);
  } else if (e.getStateChange() == ItemEvent.DESELECTED) {
    b.setText("ğŸ”“");
    scrollLock(scroll, false);
    layerUI.setLocked(false);
  }
});
JScrollBar verticalScrollBar = scroll.getVerticalScrollBar();
JPanel verticalBox = new JPanel(new BorderLayout());
verticalBox.setOpaque(false);
verticalBox.add(new JLayer<>(verticalScrollBar, layerUI));
verticalBox.add(lock, BorderLayout.SOUTH);
BoundedRangeModel model = verticalScrollBar.getModel();
model.addChangeListener(e -> {
  BoundedRangeModel m = (BoundedRangeModel) e.getSource();
  verticalBox.setVisible(m.getMaximum() - m.getMinimum() > m.getExtent());
});
verticalBox.setVisible(model.getMaximum() - model.getMinimum() > model.getExtent());
JPanel panel = new JPanel(new BorderLayout(0, 0));
panel.add(scroll);
panel.add(verticalBox, BorderLayout.EAST);
}}

* è§£èª¬ [#explanation]
- `JPanel`
-- å‚ç›´`JScrollBar`ã¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ­ãƒƒã‚¯ç”¨ã®`JToggleButton`ã‚’é…ç½®ã™ã‚‹ãŸã‚ã®`JPanel`ã‚’ä½œæˆ
- å‚ç›´`JScrollBar`
-- `JScrollPane#getVerticalScrollBar()`ã§å–å¾—ã—ã¦ä¸Šè¨˜ã®`JPanel`ä¸­å¤®ã«ãƒ­ãƒƒã‚¯ç”¨ã®`JLayer`ã‚’ã¯ã•ã‚“ã§è¿½åŠ 
-- `JScrollPane#getVerticalScrollBar()#getModel()`ã§å–å¾—ã—ãŸ`BoundedRangeModel`ã«`ChangeListener`ã‚’è¿½åŠ ã—ã€å‚ç›´`JScrollBar`ãŒéè¡¨ç¤ºã«ãªã‚‹å ´åˆã¯è¦ª`JPanel`ã”ã¨`setVisible(false)`ãƒ¡ã‚½ãƒƒãƒ‰ã§éè¡¨ç¤ºã«è¨­å®š
- ãƒ­ãƒƒã‚¯ç”¨`JToggleButton`
-- ä¸Šè¨˜ã®`JPanel`ä¸‹éƒ¨ã«è¿½åŠ 
-- é¸æŠçŠ¶æ…‹ã«ãªã‚‹ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’`ğŸ”“`ã‹ã‚‰`ğŸ”’`ã«å¤‰æ›´
-- ã•ã‚‰ã«`JScrollPane`ã®ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã€å†…éƒ¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’`setEnabled(false)`ãªã©ã§ç„¡åŠ¹åŒ–
--- [[JScrollPaneã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ç¦æ­¢>Swing/DisableScrolling]]
-- `JScrollPane`ã‹ã‚‰åˆ¥ãƒ‘ãƒãƒ«ã«ç§»å‹•ã€é…ç½®ã•ã‚Œã¦ã„ã‚‹å‚ç›´`JScrollBar`ã¯`JLayer`ã§å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒ–ãƒ­ãƒƒã‚¯
--- [[JLayerã§å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®å…¥åŠ›ã‚’åˆ¶é™ã™ã‚‹>Swing/PopupMenuBlockLayer]]
-- ãƒ­ãƒƒã‚¯ç”¨`JToggleButton`è‡ªèº«ã¯ä¸Šè¨˜ã®`JLayer`ã§ã¾ã¨ã‚ã¦å…¥åŠ›ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œãªã„ä½ç½®ã«é…ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

----
- `Windows 10`ç’°å¢ƒã§å®Ÿè¡Œã™ã‚Œã°ã‚«ãƒ©ãƒ¼çµµæ–‡å­—ãŒè¡¨ç¤ºä¸å¯ã®`Swing`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚‚ç™½é»’ã®ã‚°ãƒªãƒ•ãŒãƒ•ã‚©ãƒ³ãƒˆã‹ã‚‰å–å¾—å¯èƒ½ã ãŒã€`Ubuntu 20.04`ç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹ã¨`Swing`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§çµµæ–‡å­—ãŒè¡¨ç¤ºã•ã‚Œãªã„
-- `Font.canDisplay(0x1F513)`ã§ã¯`true`ãŒè¿”ã‚‹ãŒã‚°ãƒªãƒ•ã¯å¹…ã‚¼ãƒ­ã«ãªã£ã¦ãªã«ã‚‚è¡¨ç¤ºã•ã‚Œãªã„
-- [[FontãŒUnicodeã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§æŒ‡å®šã—ãŸæ–‡å­—ã®ã‚°ãƒªãƒ•ã‚’æŒã£ã¦è¡¨ç¤ºå¯èƒ½ã‹ç¢ºèªã™ã‚‹>Swing/FontCanDisplay]]

* å‚è€ƒãƒªãƒ³ã‚¯ [#reference]
- [[JScrollPaneã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ç¦æ­¢>Swing/DisableScrolling]]
- [[JLayerã§å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®å…¥åŠ›ã‚’åˆ¶é™ã™ã‚‹>Swing/PopupMenuBlockLayer]]

* ã‚³ãƒ¡ãƒ³ãƒˆ [#comment]
#comment
#comment
